# kong-docker

The Docker image generated by the Dockerfile on this repository can easily install Kong plugins from the source code.

A Kong configuration file containing the plugin names is automatically generated when the Docker container is started. The plugin description file (.rockspec) must be valid following the specifications in https://github.com/luarocks/luarocks/wiki/Rockspec-format.


Plugins can be loaded from volumes in a docker-compose description file. The configuration below shows how the image can be used.

``` yml
version: "3"
services:
  kong-database:
    image: postgres:9.4
    container_name: kong-database
    ports:
      - "5433:5432"
    environment:
      - POSTGRES_USER=kong
      - POSTGRES_DB=kong

  kong:
    image: kong-docker
    container_name: kong
    restart: always
    ports:
      - 8000:8000
      - 8001:8001
    environment:
      - KONG_DATABASE=postgres
      - KONG_PG_HOST=kong-database
    volumes:
      - kong.conf:/etc/kong/kong.conf
      - <plugin>:/plugins/<plugin>
```
